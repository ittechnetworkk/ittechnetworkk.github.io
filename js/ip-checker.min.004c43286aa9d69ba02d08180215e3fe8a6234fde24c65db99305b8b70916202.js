const COMMON_PORTS=[21,22,23,25,53,80,110,143,443,465,587,993,995,3306,3389,5432,8080];async function getIPInfo(){try{const n=document.querySelectorAll(".loading");n.forEach(e=>e.classList.add("loading"));const i=await fetch("https://api.ipify.org?format=json"),t=await i.json(),a=await fetch(`https://ipwho.is/${t.ip}`),e=await a.json(),r=document.getElementById("ip-address"),s=document.getElementById("location"),o=document.getElementById("isp"),c=document.getElementById("type");r.textContent=t.ip,e.success?(s.textContent=`${e.city}, ${e.country}`,o.textContent=e.connection.isp):(s.textContent="Not available",o.textContent="Not available"),c.textContent=t.ip.includes(":")?"IPv6":"IPv4",n.forEach(e=>e.classList.remove("loading"))}catch(e){console.error("Error fetching IP info:",e),setErrorState()}}async function getNetworkDetails(){try{const e=await fetch("https://cloudflare-dns.com/dns-query",{headers:{Accept:"application/dns-json"}}),t=await e.json();return{subnetMask:"255.255.255.0",gateway:"Requires local network access",dnsServers:["1.1.1.1","8.8.8.8"]}}catch(e){return console.error("Error fetching network details:",e),{subnetMask:"Not available",gateway:"Not available",dnsServers:[]}}}async function pingHost(e){const t=document.getElementById("ping-result");t.textContent="Pinging...",t.className="result-box";try{const n=performance.now();await fetch(`https://${e}`,{mode:"no-cors"});const s=performance.now(),o=Math.round(s-n);t.textContent=`Host is reachable
Response time: ${o}ms`,t.className="result-box success"}catch{t.textContent="Host unreachable or error occurred",t.className="result-box error"}}async function dnsLookup(e){const t=document.getElementById("dns-result");t.textContent="Looking up DNS records...",t.className="result-box";try{const s=await fetch(`https://dns.google/resolve?name=${e}`),n=await s.json();if(n.Answer){const e=n.Answer.map(e=>`${e.name} (${e.type}): ${e.data}`).join(`
`);t.textContent=e,t.className="result-box success"}else t.textContent="No DNS records found",t.className="result-box error"}catch{t.textContent="Error looking up DNS records",t.className="result-box error"}}async function checkHeaders(e){const t=document.getElementById("headers-result");t.textContent="Checking headers...",t.className="result-box";try{const n=await fetch(e,{method:"HEAD"}),s=Array.from(n.headers.entries()).map(([e,t])=>`${e}: ${t}`).join(`
`);t.textContent=s||"No headers found",t.className="result-box success"}catch{t.textContent="Error checking headers",t.className="result-box error"}}function setErrorState(){const e=["ip-address","location","isp","type"];e.forEach(e=>{const t=document.getElementById(e);t&&(t.textContent="Not available",t.classList.remove("loading"))})}function copyToClipboard(e){navigator.clipboard.writeText(e).then(()=>{const e=document.createElement("div");e.className="copy-notification",e.textContent="Copied!",document.body.appendChild(e),setTimeout(()=>{e.remove()},2e3)}).catch(e=>{console.error("Failed to copy:",e)})}document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("refresh-ip");e.addEventListener("click",getIPInfo),document.querySelectorAll(".copy-btn").forEach(e=>{e.addEventListener("click",()=>{const t=e.dataset.copy,n=document.getElementById(t).textContent;copyToClipboard(n)})});const t=document.getElementById("start-ping");t.addEventListener("click",()=>{const e=document.getElementById("ping-host").value.trim();e&&pingHost(e)});const n=document.getElementById("start-dns");n.addEventListener("click",()=>{const e=document.getElementById("dns-host").value.trim();e&&dnsLookup(e)});const s=document.getElementById("check-headers");s.addEventListener("click",()=>{const e=document.getElementById("headers-url").value.trim();e&&checkHeaders(e)}),getIPInfo()})